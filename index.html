<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ç›¸ç¶šç¨ãƒ»è´ˆä¸ç¨ ç°¡æ˜“è¨ˆç®—ãƒ„ãƒ¼ãƒ«</title>
  <style>
    body {
      font-family: sans-serif;
      background: #f0f0f0;
      padding: 5vw;
      font-size: 3.5vw;
    }
    @media (min-width: 600px) {
      body {
        font-size: 1rem;
        padding: 20px;
      }
    }
    .container {
      max-width: 700px;
      margin: auto;
      background: white;
      padding: 20px;
      border-radius: 10px;
      box-shadow: 0 0 10px rgba(0,0,0,0.1);
    }
    label, select, input {
      display: block;
      margin-bottom: 15px;
      width: 100%;
      font-size: 1rem;
    }
    .result {
      margin-top: 20px;
      font-weight: bold;
      font-size: 1.2rem;
    }
    .section {
      margin-top: 40px;
      border-top: 1px solid #ddd;
      padding: 20px;
      border-radius: 10px;
    }
    .inheritance-section {
      background-color: #e3f2fd;
    }
    .gift-section {
      background-color: #fce4ec;
    }
    h3 {
      margin-top: 0;
    }
  </style>
</head>
<body>
  <div class="container">
    <h2>ç›¸ç¶šç¨ãƒ»è´ˆä¸ç¨ ç°¡æ˜“è¨ˆç®—ãƒ„ãƒ¼ãƒ«</h2>

    <!-- ç›¸ç¶šç¨ã‚¨ãƒªã‚¢ -->
    <div class="section inheritance-section">
      <h3>ğŸ“˜ ç›¸ç¶šç¨ è¨ˆç®—</h3>

      <label for="estateSelect">éºç”£ç·é¡ï¼ˆä¸‡å††ï¼‰:</label>
      <select id="estateSelect">
        <option value="">ãƒ—ãƒ«ãƒ€ã‚¦ãƒ³ã§é¸æŠ</option>
        <option value="5000">5,000 ä¸‡å††</option>
        <option value="10000">1 å„„å††</option>
        <option value="15000">1 å„„5,000 ä¸‡å††</option>
        <option value="20000">2 å„„å††</option>
        <option value="30000">3 å„„å††</option>
      </select>

      <input type="number" id="estateInput" placeholder="ã¾ãŸã¯é‡‘é¡ã‚’ç›´æ¥å…¥åŠ›ï¼ˆä¸‡å††ï¼‰">

      <label for="heirs">æ³•å®šç›¸ç¶šäººã®äººæ•°:</label>
      <input type="number" id="heirs" placeholder="ä¾‹ï¼š2">

      <label for="hasSpouse">é…å¶è€…ã¯ã„ã¾ã™ã‹ï¼Ÿ</label>
      <select id="hasSpouse">
        <option value="yes">ã„ã‚‹</option>
        <option value="no">ã„ãªã„</option>
      </select>

      <label for="heirType">ç›¸ç¶šäººã®æ§‹æˆ:</label>
      <select id="heirType">
        <option value="child">å­ã©ã‚‚ãŒã„ã‚‹</option>
        <option value="parent">å­ã©ã‚‚ã¯ã„ãªã„ãŒã€è¦ªãŒã„ã‚‹</option>
        <option value="sibling">å­ã‚‚è¦ªã‚‚ã„ãªã„ â†’ å…„å¼Ÿå§‰å¦¹ãŒç›¸ç¶šäºº</option>
      </select>

      <div class="result" id="inheritanceResult"></div>
    </div>

    <!-- è´ˆä¸ç¨ã‚¨ãƒªã‚¢ -->
    <div class="section gift-section">
      <h3>ğŸ è´ˆä¸ç¨ è¨ˆç®—</h3>

      <label for="giftAmountSelect">è´ˆä¸é‡‘é¡ï¼ˆä¸‡å††ï¼‰:</label>
      <select id="giftAmountSelect">
        <option value="">ãƒ—ãƒ«ãƒ€ã‚¦ãƒ³ã§é¸æŠ</option>
        <option value="100">100 ä¸‡å††</option>
        <option value="200">200 ä¸‡å††</option>
        <option value="500">500 ä¸‡å††</option>
        <option value="1000">1,000 ä¸‡å††</option>
        <option value="2000">2,000 ä¸‡å††</option>
        <option value="3000">3,000 ä¸‡å††</option>
      </select>

      <input type="number" id="giftAmountInput" placeholder="ã¾ãŸã¯é‡‘é¡ã‚’ç›´æ¥å…¥åŠ›ï¼ˆä¸‡å††ï¼‰">

      <label for="giftCategory">è´ˆä¸å¯¾è±¡è€…:</label>
      <select id="giftCategory">
        <option value="tokutei">18æ­³ä»¥ä¸Šã®å­ãƒ»å­«ãƒ»ã²å­«ï¼ˆç‰¹å®šè´ˆä¸ï¼‰</option>
        <option value="ippan">ä¸Šè¨˜ä»¥å¤–ï¼ˆä¸€èˆ¬è´ˆä¸ï¼‰</option>
      </select>

      <div class="result" id="giftResult"></div>
    </div>
  </div>

<script>
  // ç›¸ç¶šç¨è¨ˆç®—
  const estateSelect = document.getElementById('estateSelect');
  const estateInput = document.getElementById('estateInput');
  const heirsInput = document.getElementById('heirs');
  const hasSpouseSelect = document.getElementById('hasSpouse');
  const heirTypeSelect = document.getElementById('heirType');
  const inheritanceResultDiv = document.getElementById('inheritanceResult');

  function calculateInheritanceTax() {
    const estate = parseFloat(estateInput.value || estateSelect.value);
    const heirs = parseInt(heirsInput.value);
    const hasSpouse = hasSpouseSelect.value === 'yes';
    const heirType = heirTypeSelect.value;

    if (isNaN(estate) || estate <= 0 || isNaN(heirs) || heirs <= 0) {
      inheritanceResultDiv.textContent = 'éºç”£ç·é¡ã¨æ³•å®šç›¸ç¶šäººæ•°ã‚’æ­£ã—ãå…¥åŠ›ã—ã¦ãã ã•ã„ã€‚';
      return;
    }

    const basicExemption = 3000 + 600 * heirs;
    const taxableEstate = estate - basicExemption;

    if (taxableEstate <= 0) {
      inheritanceResultDiv.textContent = `èª²ç¨å¯¾è±¡å¤–ã§ã™ï¼ˆåŸºç¤æ§é™¤ï¼š${basicExemption}ä¸‡å††ï¼‰ã€‚`;
      return;
    }

    let taxRate = 0.1;
    let deduction = 0;
    if (taxableEstate <= 1000) {
      taxRate = 0.1; deduction = 0;
    } else if (taxableEstate <= 3000) {
      taxRate = 0.15; deduction = 50;
    } else if (taxableEstate <= 5000) {
      taxRate = 0.2; deduction = 200;
    } else {
      taxRate = 0.3; deduction = 400;
    }

    let tax = Math.floor(taxableEstate * taxRate - deduction);
    if (hasSpouse) tax = Math.floor(tax * 0.5);
    if (heirType === 'sibling') tax = Math.floor(tax * 1.2);

    inheritanceResultDiv.textContent = `æ¦‚ç®—ç›¸ç¶šç¨é¡ï¼š${tax}ä¸‡å††ï¼ˆåŸºç¤æ§é™¤ï¼š${basicExemption}ä¸‡å††ï¼‰`;
  }

  estateSelect.addEventListener('change', () => {
    estateInput.value = '';
    calculateInheritanceTax();
  });
  estateInput.addEventListener('input', () => {
    estateSelect.value = '';
    calculateInheritanceTax();
  });
  heirsInput.addEventListener('input', calculateInheritanceTax);
  hasSpouseSelect.addEventListener('change', calculateInheritanceTax);
  heirTypeSelect.addEventListener('change', calculateInheritanceTax);

  // è´ˆä¸ç¨è¨ˆç®—
  const giftAmountSelect = document.getElementById('giftAmountSelect');
  const giftAmountInput = document.getElementById('giftAmountInput');
  const giftCategorySelect = document.getElementById('giftCategory');
  const giftResultDiv = document.getElementById('giftResult');

  function calculateGiftTax() {
    const amount = parseFloat(giftAmountInput.value || giftAmountSelect.value);
    const category = giftCategorySelect.value;

    if (isNaN(amount) || amount <= 0) {
      giftResultDiv.textContent = "é‡‘é¡ã‚’æ­£ã—ãå…¥åŠ›ã—ã¦ãã ã•ã„ã€‚";
      return;
    }

    const exemption = 110;
    const taxable = amount - exemption;

    if (taxable <= 0) {
      giftResultDiv.textContent = "èª²ç¨å¯¾è±¡å¤–ã§ã™ï¼ˆ110ä¸‡å††ä»¥ä¸‹ï¼‰ã€‚";
      return;
    }

    let taxRate = 0.1;
    let deduction = 0;

    if (taxable <= 200) {
      taxRate = 0.1; deduction = 0;
    } else if (taxable <= 400) {
      taxRate = 0.15; deduction = 10;
    } else if (taxable <= 600) {
      taxRate = 0.2; deduction = 30;
    } else {
      taxRate = 0.3; deduction = 65;
    }

    if (category === "tokutei") {
      deduction -= 5;
    }

    const tax = Math.floor(taxable * taxRate - deduction);
    giftResultDiv.textContent = `æ¦‚ç®—è´ˆä¸ç¨é¡ï¼š${tax}ä¸‡å††`;
  }

  giftAmountSelect.addEventListener('change', () => {
    giftAmountInput.value = '';
    calculateGiftTax();
  });
  giftAmountInput.addEventListener('input', () => {
    giftAmountSelect.value = '';
    calculateGiftTax();
  });
  giftCategorySelect.addEventListener('change', calculateGiftTax);
</script>
</body>
</html>
